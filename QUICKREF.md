# SlimeGobble - 快速参考

## 🎯 第一阶段完成情况

✅ **已完成所有目标**
- Game 类完整实现
- Player 类完整实现  
- 关卡1地图加载和游玩
- 自动化测试全部通过

## 📂 核心文件说明

| 文件 | 作用 | 行数 |
|------|------|------|
| `config.py` | 配置中心、3个关卡地图 | ~180 |
| `player.py` | Player类、动画、碰撞 | ~250 |
| `game.py` | Game类、主循环、UI | ~330 |
| `main.py` | 游戏入口 | ~30 |

## 🚀 常用命令

```bash
# 启动游戏
./run.sh
# 或
python main.py

# 运行测试
python test_phase1.py

# 查看文档
cat PHASE1_SUMMARY.md
cat DEVELOPMENT.md
```

## 🎮 游戏数据

### 关卡统计
| 关卡 | 金币 | 大金币 | 最高分 | 敌人出生点 |
|------|------|--------|--------|-----------|
| 1 | 121 | 4 | 1410 | 1 |
| 2 | 117 | 4 | 1370 | 2 |
| 3 | 114 | 4 | 1340 | 3 |

### 得分规则
- 小金币(`.`): **10分**
- 大金币(`O`): **50分**
- 升级分数: **500分**

### 速度设置
- 玩家: **3 像素/帧**
- 敌人L1: **1.5 像素/帧** (随机移动)
- 敌人L2: **2.0 像素/帧** (追踪)
- 敌人L3: **2.5 像素/帧** (快速追踪)

## 🎨 占位符颜色

由于美术资产路径问题，当前使用颜色占位符：
- 🟩 玩家 = 绿色
- 🟦 墙壁 = 蓝色
- 🟨 金币 = 黄色
- 🟥 大金币 = 红色

## 🛠️ 代码架构

```
Game.run()                    # 主循环 60 FPS
├── handle_events()           # 处理输入/点击
├── update()                  # 更新逻辑
│   ├── Player.update()       # 玩家移动
│   ├── check_coin_collection() # 金币检测
│   └── check_level_complete() # 关卡完成
└── draw()                    # 渲染画面
    ├── draw_map()            # 地图
    ├── Player.draw()         # 玩家
    └── draw_hud()            # HUD
```

## 🔑 关键类方法

### Player 类
```python
Player(x, y)                  # 初始化
player.update(keys, map)      # 更新（每帧调用）
player.move(dx, dy, map)      # 移动
player.check_collision(rect, map) # 碰撞检测
player.draw(screen)           # 绘制
player.reset_position(x, y)   # 重置位置
```

### Game 类
```python
Game()                        # 初始化
game.load_level(index)        # 加载关卡
game.start_game()             # 开始游戏
game.run()                    # 主循环
```

## 📊 测试输出示例

```
==================================================
SlimeGobble 第一阶段功能测试
==================================================
🧪 测试配置文件...
  ✅ 配置文件测试通过

🧪 测试关卡地图...
  测试关卡 1...
    地图尺寸: 15x18
    墙壁: 143, 金币: 121, 大金币: 4
    最大得分: 1410
  ✅ 所有关卡地图测试通过

🧪 测试Player类...
  初始位置: (2, 2), 像素: (64, 64)
  向右移动后: x=94 (初始=64)
  碰墙测试: x=32 (原始=32)
  ✅ Player类测试通过

==================================================
✅ 所有测试通过！
==================================================
```

## 🐛 故障排除

### 问题：pygame未安装
```bash
source venv/bin/activate
pip install pygame numpy
```

### 问题：美术资产加载失败
这是正常的！游戏会使用彩色占位符。要使用真实资产：
1. 复制 `assets/` 文件夹到项目根目录
2. 修改 `config.py` 中的 `ASSETS_PATH = './assets'`

### 问题：游戏无法启动
确保：
1. 已激活虚拟环境
2. 已安装依赖
3. 在项目根目录运行

## 📝 下一步开发

**Phase 2 - Enemy & Life System**
- [ ] Enemy 类实现
- [ ] 3种AI算法
- [ ] 玩家-敌人碰撞
- [ ] 生命系统（3条命）
- [ ] 重生机制
- [ ] 关卡推进
- [ ] GAME_OVER 状态
- [ ] VICTORY 状态
- [ ] 音效系统

## 💡 开发提示

1. **测试驱动**：每次修改后运行 `test_phase1.py`
2. **模块化**：新功能添加到对应的类中
3. **常量优先**：所有配置放在 `config.py`
4. **注释清晰**：关键逻辑添加中文注释

---

*快速开始，快速验证！* 🚀
